<div class="dms-search">
	<form class="form-horizontal">
		<div class="panel panel-default">
			<div class="panel-body">
				<div class="row">

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">角色代码</label>
							<div class="col-xs-8 ">
								<input type="text" class="form-control" id="roleCode"
									name="roleCode">
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">角色名称</label>
							<div class="col-xs-8 ">
								<input type="text" class="form-control" id="roleName"
									name="roleName">
							</div>
						</div>
					</div>

				</div>
				<div class="row ">
					<div class="col-xs-12 ">
						<div class="query-btn">
							<a href="javascript:;" class="btn blue"> <i
								class="fa fa-search"></i> 查询
							</a> <a href="javascript:;" class="btn blue"> <i
								class="fa fa-undo"></i> 重置
							</a>
							<a class="btn blue" href="javascript:;" data-onclickEvent1="true">
								<i class="fa fa-save"></i> 保存
							</a>
							
								
						</div>
						
						
						
				   
					</div>
				</div>
			</div>
		</div>
	</form>
	
	<div class="panel panel-default table-panel">
		<div class="panel-heading col-xs-3">
			<div class="pannel-name ">角色信息</div>
			<div class="pannel-button">
				<div class="btn-group btn-group-sm">
					<a data-url="manage/basedata/RolePermission/addRole.html"
						class="btn btn-outline" data-toggle="modal"  data-beforeShowEvent="true"> <i
						class="fa fa-plus-square"></i> 新增
					</a>

				</div>
			</div>
		</div>
		<!--  -->
		<div class="panel-heading col-xs-3">
			<div class="pannel-name ">菜单权限</div>

		</div>
		<!--  -->
		<div class="panel-heading col-xs-3">
			<div class="pannel-name ">客户信息操作权限</div>
			<div class="pannel-button"></div>
		</div>
		<!--  -->
		<div class="panel-heading col-xs-3">
			<div class="pannel-name ">个人参数配置</div>

		</div>
		<!--  -->
		<div class="panel-body col-xs-3 ">
			<table class="table table-striped table-bordered table-hover"
				id="dms_table1" data-beforeShowEvent="true"></table>
		</div>
		<div class="panel-body col-xs-3 " style="border:solid 1px #DDDDDD;height:400px;">
		
			<div id="using_json_2"></div>
			

		</div>
		<div class="panel-body col-xs-3 " style="border:solid 1px #DDDDDD;height:400px;">

         <div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
					<label></label>
					</div>
			
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-6">
						<div class="form-group">
							<div class="col-xs-12">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="数据范围"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="本人"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="本组织"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="本组织及下属"/>
							</div>
						</div>
					</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group col-md-offset-1">
							<div class="col-xs-12">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="所有"/>
							</div>
						</div>
					</div>
					
					
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
					<label></label>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
					<label></label>
					</div>
					
					<!--  -->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="操作按钮"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input  id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="新增" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input  id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="修改" />
							</div>
						</div>
					</div>
					
					
					
	
		</div>
		<!-- 第四列 -->
       <div class="panel-body col-xs-3 " style="border:solid 1px #DDDDDD;height:400px;">
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
					 <label></label>
					 </div>
       <div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="维修"  />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1211" data-value="12111001"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1212" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1213" />
							</div>
						</div>
					</div>
					<!--第二行  -->
					<div class="col-xs-12">
					     <div class="col-xs-12">
					     <HR class="divider"/>
					    </div>
					</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="配件"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1313" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1314" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1315" />
							</div>
						</div>
					</div>
					<!--第三行  -->
					<div class="col-xs-12">
					     <div class="col-xs-12">
					     <HR class="divider"/>
					    </div>
					</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="仓库"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1316" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1317" />
							</div>
						</div>
					</div>
					<!--第四行  -->
					<div class="col-xs-12">
					     <div class="col-xs-12">
					     <HR class="divider"/>
					    </div>
					</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1013" data-dictLabel="优惠模式"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1400" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
							<div class="col-xs-12 col-md-offset-1">
		                            <input id="isCheck" name="isCheck" type="checkbox"
										data-dictCode="1401" />
							</div>
						</div>
					</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-12">
						<div class="form-group">
						<label class="control-label col-xs-4">地区类型</label>
							<div class="col-xs-12 col-md-offset-1">
		                           <input id="region" name="region" type="checkbox"
										data-dictCode="1000" data-allFlag="false"
										data-value="10001003,10001002,10001001" />
							</div>
						</div>
					</div>
					
					
					
       
       </div>



	</div>
</div>
<script type="text/javascript">
	
  
  $(document).one("onload.dms",function(event,container){
	  var myRowData;
  	new Datatable().initPagination({
  		src : "dms_table1",
  		container:container,
		url :dmsCommon.getDmsPath()["manage"] + "/basedata/roles",
		rowID : "ROLE_ID",
		sortName : "ROLE_ID", 
		sortOrder : "asc",
		
		columns:[
		         {field : "ROLE_ID",title : "操作",operateFormat : [
		           {type:"edit",url:"manage/basedata/RolePermission/rolePermissionAdd.html",openWidth:"modal-lg"},
		           {type:"del",url:"/basedata/brands/{[BRAND_ID]}",model:"manage",callBack:"delBrandCallBack"},
		            ]
		           },
					{field:"ROLE_CODE",title:"角色代码"},
					{field:"ROLE_NAME",title:"角色名称"},
					
		    	  ],
		   

		       onDblClickRow:function(rowData,trElement){
		    	  
		    	     var roleId="data="+JSON.stringify(rowData.ROLE_ID);
		    	//  alert("aa");

		    		//alert("bb");
		    		/* alert("rowData:"+JSON.stringify(rowData)+";trElement:"+$(trElement).html());
		    		alert("roleId"+roleId); */
		    		myRowData=rowData;
		    		//alert(roleId);
		    		
		    		 dmsCommon.ajaxRestRequest({
						url : dmsCommon.getDmsPath()["manage"]
								+ "/basedata/roles/tree/jsons",
						type : 'GET',
						data :roleId,
						
						sucessCallBack : function(data) {
							$.jstree.destroy ()
						//	alert("hahahhaa1"+data);
							$('#using_json_2').jstree({
								'core' : {

									
									'data' : data
								},
							  
								plugins : ["wholerow", "checkbox" ]

							});
						}
					}); 
		    		
		    		}, 
			/* onLoadSuccess : function() {
				$("#dms_table1",getElementContext()).dmsTable().bootstrapTable('resetView');
			} //当需要实现回调时才实现，否则不实现 */


		});
  	
  //事件点击
	
	var selectCode;
	//节点点击
	$('#using_json_2').on("changed.jstree", function (e, data) {
		 
		  selectCode=data.selected; 
		});
	$("a[data-onclickEvent1='true']",container).on("dms.click",function(event){
		
		var str="data="+myRowData.ROLE_ID+","+selectCode;
		
		//alert("点击了保存方法"+JSON.stringify(myRowData.ROLE_ID));
		//alert(selectCode);
		$.ajax({
			url : dmsCommon.getDmsPath()["manage"]
					+ "/basedata/roles/tree",
			type : 'GET',
			data:str,
			//data:{treenode:selectCode},
			sucessCallBack : function(data) {

				//alert("成功了");
			}
			
		});
		
		
	});
  	
  /* 	+function(){
		if($("#dms_table1",getElementContext()).size()>0){
			var parentRow = $("#dms_table1",getElementContext()).dmsTable().getParentTabelRow();
			//$("#parentUserId",container).val(parentRow.ROLE_ID);
			alert(parentRow);
		}
	}(); */
	/* $("a[data-beforeShowEvent='true']",container).on("beforeShow.dms",function(event,returnResult){
		var parentTableRow = $("#dms_table1",getElementContext()).dmsTable().getParentTabelRow();
		if(parentTableRow==undefined){
			dmsCommon.tip({status:"warning",msg:"请双击选择父表格数据"});
			returnResult.status = false;
			return;
		}
		returnResult.status = true;
	}); */
	
	
	
	
	
	
/* 
						    +function(){
							 $('#using_json_2').jstree({ 'core' : {
							    'data' : [
							       { "id" : "ajson1", "parent" : "#", "text" : "Simple root node",'state'  : {
							    	    'opened'    : true, 
							    	    'selected'  : true  
							    	  } },
							       { "id" : "ajson2", "parent" : "#", "text" : "Root node 2" },
							       { "id" : "ajson3", "parent" : "ajson2", "text" : "Child 1" },
							       { "id" : "ajson4", "parent" : "ajson2", "text" : "Child 2" },
							    ]
							
							} ,
							'checkbox' : {
							      "keep_selected_style" : false
							    },
							 plugins : ["checkbox"]
							 }); 
							 
							var ids="ajson3,ajson4";
								alert(ids);
								if (ids != "") {
								var tempCheckStr = ids.split(',');
								$(tempCheckStr).each(function(i, item) {
									alert("aa");
								$("#using_json_2").jstree("check_node", "#" + item);
								});
								}
						}();     */
						
						
						/*   +function(){
						$.ajax({
							type  : "GET",  
							data:{parentId:"0"},
						       url :  dmsCommon.getDmsPath()["manage"] + "/basedata/roles/treejson",
						       success: function(data1){
						       	//var json=$.parseJSON( data );
						           alert(data1);
						       	 $('#using_json_2').jstree({ 
						       		 core: {  "data":data1  },
						    		 plugins : ["checkbox"]
						       	 });   
						        }
							
						});
						
						}();  */

						/*  $('#using_json_2').jstree(
							 
							  { 'core' : {
						   'data' : [{ attributes :{ id : "10" }, state : "open",
						   	 DATA : "系统管理",
						   	 children :[] },{ attributes :{ id : "20" }, state : "open",
						   	 DATA : "整车管理",
						   	 children :[] },{ attributes :{ id : "30" }, state : "open",
						   	 DATA : "客户管理",
						   	 children :[] },{ attributes :{ id : "40" }, state : "open",
						   	 DATA : "维修管理",
						   	 children :[] },{ attributes :{ id : "50" }, state : "open",
						   	 DATA : "配件管理",
						   	 children :[] },{ attributes :{ id : "60" }, state : "open",
						   	 DATA : "报表",
						   	 children :[] },{ attributes :{ id : "70" }, state : "open",
						   	 DATA : "表格模板",
						   	 children :[] }]
						
						} ,
						
						plugins : ["checkbox"]
						});  */
			     +function(){
						
			     }();  
			   

		});
</script>